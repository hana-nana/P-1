## SPA 학습
- 최신 웹 페이지는 빈 화면에 대한 시간을 줄이기 위해 라우팅과 함께 SPA (Single Page Application)를 사용함. 이 라우팅으로 인해 사용자는 새 콘텐츠가 필요할 때마다 서버에 요청할 필요가 없음. 초기 애플리케이션을 로드할 때 모든 웹 사이트 콘텐츠를 로드하고 URL 경로 이름에 따라 페이지에 올바른 콘텐츠를 동적으로 표현하는 것. 따라서 url이 변경될 때 페이지를 다시 로드할 필요 없음. 로딩때문에 빈화면만 보고 있다가 새 페이지를 툭 던져주는 기존 방식과 달리, 부드러운 애니메이션 등으로 페이지가 연결되는 느낌을 줌.

## history API 학습 
- history라는 API를 사용하는 방법은, SPA 라우팅을 구현하는 방법 중 하나. 이 방법을 활용해 SPA 라우팅을 구현하면 페이지를 다시 로드하지 않고 URL을 탐색할 수 있음. 그 이유는 서버가 아닌 메모리에 저장되기 때문. url 창에 사용자가 입력한 주소들은 일종의 주소록과 같은 메모리에 보관되는데, 그 메모리를 다루는 것이 history API임. 
- 현재 url에서 뒤로가기를 했을 때, 이전 페이지가 로드되는 것은 history API 메모리 안에 저장되어 있는 이전 주소를 불러온 것임.
- 위와 같이 만들기 위해서는 주소가 저장되어 있는 메모리 안에 내가 원하는 주소를 추가해야 함. 이 역할을 하는 것이 pushstate() 메소드. 
- 그 다음 popstate() 이벤트를 활용해, 뒤로가기 or 앞으로가기 클릭시 화면 바뀌게 함.

## Router 만들기 : url에 맞게 콘텐츠를 보여주는 기능
1. pushstate()
    - pushstate() 함수는 url을 이동해야하는 상황에 사용할 수 있음. 예를 들어 네비게이션 바에서 특정 메뉴를 눌렀을 때 이 함수가 실행되어, 해당 메뉴에 대한 뷰로 (페이지로) 이동하게 만든다고 생각하면 됨.
    - history API를 통해 접근할 수 있는 window의 이벤트로, window를 생략하고 그냥 pushState()로만 쓸 수도 있음.
    - pushState는 세개의 인자를 받음. -> state(새로운 데이터 객체), title(state의 제목), url(이동하고 싶은 url / 현재 url과 같은 출처를 가져야 하며 지정하지 않는 경우 현재 문서의 url 사용)
    - pushState()는 뒤로가기를 누르거나 새로고침을 눌렀을 때, url만 바꿔줄 뿐 다시 렌더링을 해주지는 않음(router를 다시 동작시키지 않음). 이에 주의해야 함. 따라서 view를 호출하는 router를 실행시키게 해야 함.
        ``` 
        const navigateTo = (url) => { history.pushState(null, null, url); router();
        };
        ```

    - href로 링크를 걸면 새로고침이 발생하므로 먼저 이를 막아야 함. 아래 코드 실행시 새로고침 없이 페이지 이동이 가능함.
        ```
        document.addEventListener("DOMContentLoaded", () => {
            document.body.addEventListener("click", (e) => {
                //이벤트 위임을 위해 작성하는 코드
                //data-link라는 data attribute를 가진 링크에만 작동하도록 조건문을 작성해 이벤트를 위임한다
                if (e.target.matches("[data-link]")) {
                    // 링크가 기본으로 가지고 있는 동작을 멈춰서 새로고침을 방지한다
                    e.preventDefault();
                    // 그리고 페이지 콘텐츠 변경 및 path 이동을 위해 우리가 만든 함수를 대신 실행한다
                    // 링크가 가진 href를 url로 삼아서 함수를 실행한다
                    navigateTo(e.target.href);
                }
            });
            router();
        });
        ```

2. popstate()
    - pushState()만 작성하면 그냥 링크만 연결된 거라, 뒤로가기 또는 앞으로가기를 눌렀을 때 화면이 바뀌지 않음. 이 문제를 popstate 이벤트를 이용해서 해결할 수 있음.
    - potstate 이벤트가 발생할 때마다 router 함수를 호출하면, router 함수는 view를 그려내는 것을 포함하고 있으니 뒤로가기 버튼을 눌렀을 때 화면이 변하지 않는 문제점을 해결할 수 있을 것.
    - 아래 코드는 popstate 이벤트를 붙이는 함수이자, 이벤트 발생 시 router 함수가 실행되도록 만들어주는 역할.
    ```
    window.addEventListener("popstate", router);
    ```